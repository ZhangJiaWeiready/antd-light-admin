(this["webpackJsonpantd-app"]=this["webpackJsonpantd-app"]||[]).push([[1],{488:function(e,t,n){},489:function(e,t,n){"use strict";function a(e){var t=e.props,n=C.a.useForm(),a=Object(I.a)(n,1)[0],l=t.parent;return t.parent.staffFrom=a,g.a.createElement(C.a,{labelCol:{span:11},form:a,wrapperCol:{span:13},name:"shopForm",validateMessages:{required:"\u5fc5\u586b\u9879!",string:{min:"\u5bc6\u7801\u81f3\u5c116\u4f4d"}}},g.a.createElement(C.a.Item,{name:"password",label:"\u8bf7\u8f93\u5165\u5f53\u524d\u767b\u5f55\u5bc6\u7801",rules:[{required:!0},{min:6}]},g.a.createElement(k.a.Password,null)),g.a.createElement(C.a.Item,{name:"new_password",label:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801",rules:[{required:!0},{min:6}]},g.a.createElement(k.a.Password,null)),g.a.createElement(C.a.Item,{name:"copy_newPassword",label:"\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u5bc6\u7801",rules:[{required:!0},{min:6}]},g.a.createElement(k.a.Password,null)),g.a.createElement(C.a.Item,{wrapperCol:{span:13,offset:11}},g.a.createElement("div",{className:"text-right"},g.a.createElement(v.a,{type:"default",onClick:function(){return l.cancelPassword()}},"\u53d6\u6d88"),g.a.createElement(v.a,{type:"primary",onClick:function(){return l.confirmChangePassword()},className:"ml10"},"\u786e\u5b9a"))))}n.r(t),n(104);var l,r=n(59),i=(n(476),n(474)),o=(n(223),n(190)),s=(n(470),n(473)),u=(n(471),n(477)),c=(n(472),n(475)),p=(n(222),n(189)),m=n(164),d=n(163),f=n(43),h=n(44),y=n(61),E=n(60),v=(n(51),n(12)),k=(n(224),n(157)),C=(n(225),n(92)),I=n(158),b=(n(221),n(188)),w=n(0),g=n.n(w),V=(n(488),n(486)),S=n(487),_=n(478),N=n(98),P=b.a.confirm,O=Object(N.b)("appStore")(l=Object(N.c)(l=function(e){Object(y.a)(n,e);var t=Object(E.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).shopStore=e.appStore.shopInfo,a.state={shopInfo:null,loading:!1,inputTypeVisible:!1,inputTypeValue:"",inputColorVisible:!1,inputColorValue:"",inputKindVisible:!1,inputKindValue:"",staffList:[],curStaff:{},showStaffModel:!1,cloumns:[{title:"\u767b\u5f55\u8d26\u53f7",dataIndex:"username",align:"center"},{title:"\u5458\u5de5\u59d3\u540d",dataIndex:"staff_name",align:"center",render:function(e,t){return g.a.createElement("div",null,g.a.createElement("span",{className:"mr5"},e),g.a.createElement(v.a,{type:"link",size:"small",onClick:function(){return a.handleChangeName(t)}},g.a.createElement(V.a,null)))}},{title:"\u89d2\u8272",dataIndex:"role_name",align:"center"},{title:"\u8d26\u53f7\u72b6\u6001",dataIndex:"status",align:"center"},{title:"\u64cd\u4f5c",dataIndex:"option",render:function(){return g.a.createElement("div",null,g.a.createElement(v.a,{size:"small",type:"link"},"\u4fee\u6539\u767b\u5f55\u5bc6\u7801"))}}]},a}return Object(h.a)(n,[{key:"getShopInfo",value:function(){this.setState({shopInfo:{create_time:"2019-02-01",show_cdata:1,required_from:0,required_contract:0,kinds:[],colors:[],types:[]}})}},{key:"getStaffList",value:function(){this.setState({staffList:[{id:1,key:1,staff_name:"\u5c0f\u54c8\u54c8",username:"xhh",role_name:"\u7ba1\u7406\u5458",status:"\u6b63\u5e38"}]})}},{key:"handleChangeSwitch",value:function(e,t){var n=this.state.shopInfo;n[e]!==t&&this.setState({shopInfo:Object(d.a)({},n,Object(m.a)({},e,t))})}},{key:"handleChangeName",value:function(e){var t=Object(d.a)({},e),n=g.a.createElement("div",null,g.a.createElement(k.a,{type:"text",style:{width:200},defaultValue:t.staff_name,onChange:function(e){var n=e||window.event,a=n.target||n.srcElement;t.staff_name=a.value}}));P({title:"\u66f4\u6539\u5458\u5de5\u540d\u5b57\uff01",icon:g.a.createElement(S.a,null),maskClosable:!0,content:n})}},{key:"confirmChangePassword",value:function(){var e=this;this.staffFrom.validateFields().then((function(t){var n=t.password,a=t.new_password;if(a!==t.copy_newPassword)return p.a.error("\u786e\u8ba4\u5bc6\u7801\u548c\u65b0\u5bc6\u7801\u4e0d\u4e00\u81f4");n&&a&&e.cancelPassword()}))}},{key:"handleRemoveProp",value:function(e,t){var n=this,a=t["".concat(e,"_name")],l=this.state.shopInfo;P({title:"\u5220\u9664\u63d0\u9192",content:"\u786e\u8ba4\u5220\u9664\u3010".concat(a,"\u3011?"),onOk:function(){n.setState({loading:!0}),setTimeout((function(){var a="".concat(e,"s"),r="".concat(e,"_name");l[a]=l[a].filter((function(e){return e[r]!==t[r]})),n.setState({loading:!1,shopInfo:Object(d.a)({},l)})}),1e3)}})}},{key:"showInput",value:function(e){var t=this;"type"===e&&this.setState({inputTypeVisible:!0,inputTypeValue:""},(function(){return t.typeInput.focus()})),"color"===e&&this.setState({inputColorVisible:!0,inputColorValue:""},(function(){return t.colorInput.focus()})),"kind"===e&&this.setState({inputKindVisible:!0,inputKindValue:""},(function(){return t.kindInput.focus()}))}},{key:"handleInputChange",value:function(e,t){var n=e||window.event,a=n.target||n.srcElement,l=a.value?a.value.trim():"";"type"===t&&this.setState({inputTypeValue:l}),"color"===t&&this.setState({inputColorValue:l}),"kind"===t&&this.setState({inputKindValue:l})}},{key:"handleInputBlur",value:function(e){"type"===e&&this.setState({inputTypeVisible:!1,inputTypeValue:""}),"color"===e&&this.setState({inputColorVisible:!1,inputColorValue:""}),"kind"===e&&this.setState({inputKindVisible:!1,inputKindValue:""})}},{key:"handleInputConfirm",value:function(e){var t=this.state,n=t.shopInfo,a=t.inputTypeValue,l=t.inputColorValue,r=t.inputKindValue;"type"===e&&n.types.push({type_name:a}),"color"===e&&n.colors.push({color_name:l}),"kind"===e&&n.kinds.push({kind_name:r}),this.setState({shopInfo:n}),this.handleInputBlur(e)}},{key:"componentDidMount",value:function(){this.getShopInfo(),this.getStaffList()}},{key:"render",value:function(){var e=this,t=this.state,n=t.shopInfo,l=t.loading,p=t.inputTypeVisible,m=t.inputTypeValue,d=t.inputColorVisible,f=t.inputColorValue,h=t.inputKindVisible,y=t.inputKindValue,E=t.curStaff,v=t.showStaffModel,C=t.cloumns,I=t.staffList;return n?g.a.createElement("div",{className:"setting-content"},g.a.createElement(r.a,{spinning:l},g.a.createElement("h1",null,n.shop_name),g.a.createElement(u.a,{title:"\u5e97\u94fa\u8bbe\u7f6e",bordered:!0,size:"small",className:"in-title"},g.a.createElement(u.a.Item,{label:"\u521b\u5efa\u65f6\u95f4"},n.create_time),g.a.createElement(u.a.Item,{label:"\u662f\u5426\u5141\u8bb8\u9500\u552e\u5458\u67e5\u770b\u3010\u5ba2\u6237\u5217\u8868\u3011"},g.a.createElement(s.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",checked:!!n.show_cdata,onChange:function(t){return e.handleChangeSwitch("show_cdata",t?1:0)}})),g.a.createElement(u.a.Item,{label:"\u3010\u5408\u540c\u7f16\u53f7\u3011\u662f\u5426\u5fc5\u586b"},g.a.createElement(s.a,{checkedChildren:"\u662f",unCheckedChildren:"\u5426",checked:!!n.required_contract,onChange:function(t){return e.handleChangeSwitch("required_contract",t?1:0)}}))),g.a.createElement(u.a,{title:"\u5e97\u94fa\u5c5e\u6027",bordered:!0,size:"small",column:1,className:"in-title"},g.a.createElement(u.a.Item,{label:"\u7c7b\u578b"},n.types.map((function(t,n){return g.a.createElement("span",{key:n,style:{display:"inline-block"}},g.a.createElement(o.a,{className:"prop-item",closable:!0,onClose:function(n){n.preventDefault(),e.handleRemoveProp("type",t)}},t.type_name))})),p&&g.a.createElement(k.a,{ref:function(t){return e.typeInput=t},type:"text",size:"small",style:{width:88},value:m,onChange:function(t){return e.handleInputChange(t,"type")},onBlur:function(){return e.handleInputBlur("type")},onPressEnter:function(){return e.handleInputConfirm("type")}}),!p&&g.a.createElement(o.a,{onClick:function(){return e.showInput("type")},className:"site-tag-plus"},g.a.createElement(_.a,null)," ","\u6dfb\u52a0\u7c7b\u578b")),g.a.createElement(u.a.Item,{label:"\u989c\u8272"},n.colors.map((function(t,n){return g.a.createElement("span",{key:n,style:{display:"inline-block"}},g.a.createElement(o.a,{className:"prop-item",closable:!0,onClose:function(n){n.preventDefault(),e.handleRemoveProp("color",t)}},t.color_name))})),d&&g.a.createElement(k.a,{ref:function(t){return e.colorInput=t},type:"text",size:"small",style:{width:88},value:f,onChange:function(t){return e.handleInputChange(t,"color")},onBlur:function(){return e.handleInputBlur("color")},onPressEnter:function(){return e.handleInputConfirm("color")}}),!d&&g.a.createElement(o.a,{onClick:function(){return e.showInput("color")},className:"site-tag-plus"},g.a.createElement(_.a,null)," ","\u6dfb\u52a0\u989c\u8272")),g.a.createElement(u.a.Item,{label:"\u6b3e\u5f0f"},n.kinds.map((function(t,n){return g.a.createElement("span",{key:n,style:{display:"inline-block"}},g.a.createElement(o.a,{className:"prop-item",closable:!0,onClose:function(n){n.preventDefault(),e.handleRemoveProp("kind",t)}},t.kind_name))})),h&&g.a.createElement(k.a,{ref:function(t){return e.kindInput=t},type:"text",size:"small",style:{width:88},value:y,onChange:function(t){return e.handleInputChange(t,"kind")},onBlur:function(){return e.handleInputBlur("kind")},onPressEnter:function(){return e.handleInputConfirm("kind")}}),!h&&g.a.createElement(o.a,{onClick:function(){return e.showInput("kind")},className:"site-tag-plus"},g.a.createElement(_.a,null)," ","\u6dfb\u52a0\u6b3e\u5f0f"))),g.a.createElement("div",{className:"title"},"\u5458\u5de5\u7ba1\u7406"),g.a.createElement(i.a,{columns:C,dataSource:I,bordered:!0,size:"small",className:"mt10",pagination:!1})),g.a.createElement(b.a,{footer:!1,visible:v,width:600,destroyOnClose:!0,closable:!1,maskClosable:!0,title:"\u4fee\u6539\u3010".concat(E.staff_name,"\u3011\u767b\u5f55\u5bc6\u7801")},g.a.createElement(a,{props:{parent:this}}))):g.a.createElement("div",null,g.a.createElement(c.a,{active:!0}),g.a.createElement(c.a,{active:!0}),g.a.createElement(c.a,{active:!0}))}}]),n}(w.Component))||l)||l;t.default=O}}]);